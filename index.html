<!doctype html>
<html lang="el">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>root@node:~#</title>

<style>
html,body{
  margin:0;
  background:black;
  overflow:hidden;
  color:#00ff88;
  font-family: Consolas, monospace;
}

/* MATRIX */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

/* TERMINAL */
#terminal{
  position:relative;
  z-index:2;
  width:min(900px,94vw);
  margin:30px auto;
  background:rgba(0,0,0,.93);
  border:1px solid #00ff8855;
  padding:18px;
  box-shadow:0 0 40px #00ff8840;
}
.line{white-space:pre;}
.red{color:#ff2e2e;}
.glitch{animation:glitch .15s infinite;}
@keyframes glitch{
  0%{text-shadow:2px 0 red;}
  50%{text-shadow:-2px 0 cyan;}
  100%{text-shadow:2px 0 red;}
}

/* FLASH */
.flash{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9999;
  opacity:0;
  background:#ff0000;
}
.flash.active{animation:flashbang .45s ease-out;}
@keyframes flashbang{
  0%{opacity:0;}
  10%{opacity:1;}
  40%{opacity:.95;}
  100%{opacity:0;}
}

/* FAKE SCREEN SHARE */
#share{
  position:fixed;
  inset:0;
  z-index:9000;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.85);
  color:#ff2e2e;
  font-size:26px;
  letter-spacing:2px;
  opacity:0;
  pointer-events:none;
  transition:.3s;
}
#share.show{opacity:1;}
  /* ===== MOBILE FIXES â€“ FUNCTIONALITY UNCHANGED ===== */

/* Î±ÏƒÏ†Î±Î»Î­Ï‚ ÏÏˆÎ¿Ï‚ viewport (iOS address bar bug) */
@supports (height: 100dvh){
  body{ min-height:100dvh; }
}

/* terminal Î½Î± Î¼Î· Î²Î³Î±Î¯Î½ÎµÎ¹ ÎµÎºÏ„ÏŒÏ‚ */
#terminal{
  max-height: 72vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ· Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬ Î¼ÏŒÎ½Î¿ ÏƒÎµ Î¼Î¹ÎºÏÎ­Ï‚ Î¿Î¸ÏŒÎ½ÎµÏ‚ */
@media (max-width: 420px){
  #terminal{
    font-size: 13px;
    padding: 12px;
  }
}

/* Î±Ï€Î¿Ï†Ï…Î³Î® overflow Î±Ï€ÏŒ Î¼ÎµÎ³Î¬Î»ÎµÏ‚ Î³ÏÎ±Î¼Î¼Î­Ï‚ */
.line{
  white-space: pre-wrap;
  word-break: break-word;
}

/* matrix canvas Î½Î± Î¼Î· â€œÏ„ÏÏÎµÎ¹â€ taps */
canvas{
  pointer-events: none;
}

</style>
</head>

<body>

<canvas id="matrix"></canvas>
<div id="terminal"></div>

<div class="flash" id="flash1"></div>
<div class="flash" id="flash2"></div>

<div id="share">SCREEN SHARE INITIALIZED</div>

<script>
// ---------- MATRIX ----------
const c=document.getElementById("matrix");
const ctx=c.getContext("2d");
function resize(){ c.width=innerWidth; c.height=innerHeight; }
resize(); onresize=resize;

const chars="01ABCDEFGHIJKLMNOPQRSTUVWXYZ#$%&";
const fs=14;
const cols=Math.floor(c.width/fs);
const drops=Array(cols).fill(1);

setInterval(()=>{
  ctx.fillStyle="rgba(0,0,0,0.08)";
  ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle="#00ff88";
  ctx.font=fs+"px monospace";
  drops.forEach((y,i)=>{
    const t=chars[Math.random()*chars.length|0];
    ctx.fillText(t,i*fs,y*fs);
    if(y*fs>c.height && Math.random()>0.975) drops[i]=0;
    drops[i]++;
  });
},50);

// ---------- PRANK ----------
const nick=new URLSearchParams(location.search).get("nick")||"USER";
const term=document.getElementById("terminal");

const lines=[
  "root@node:~# init secure shell",
  "establishing encrypted tunnel...",
  "requesting screen stream...",
  "screen stream accepted",
  `active target: ${nick}`,
  "injecting live monitor...",
  "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–’â–’â–’ 64%",
  "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%",
  "LIVE SESSION ACTIVE"
];

// ---- AUDIO (Î¿Î¾Ï) ----
let audioCtx=null;
addEventListener("click",()=>{
  if(!audioCtx) audioCtx=new (AudioContext||webkitAudioContext)();
},{once:true});

function beep(freq=1600, dur=70){
  if(!audioCtx) return;
  const o=audioCtx.createOscillator();
  o.frequency.value=freq;
  o.connect(audioCtx.destination);
  o.start();
  setTimeout(()=>o.stop(),dur);
}

// 4 Î³ÏÎ®Î³Î¿ÏÎ± Î¿Î¾Î­Î± beep
function beepBurst(){
  let i=0;
  const id=setInterval(()=>{
    beep(1700,60);
    if(navigator.vibrate) navigator.vibrate(40);
    i++;
    if(i>=4) clearInterval(id);
  },120);
}

// ÏƒÏ…Î½ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ alarm beep
let alarmOsc=null;
function startAlarm(){
  if(!audioCtx || alarmOsc) return;
  alarmOsc=audioCtx.createOscillator();
  alarmOsc.frequency.value=1500;
  alarmOsc.connect(audioCtx.destination);
  alarmOsc.start();
}
function stopAlarm(){
  if(alarmOsc){
    alarmOsc.stop();
    alarmOsc.disconnect();
    alarmOsc=null;
  }
}

// FLASH
function flash(el){
  el.classList.remove("active");
  void el.offsetWidth;
  el.classList.add("active");
}

// TYPE (Ï€Î¿Î»Ï Î³ÏÎ®Î³Î¿ÏÎ¿)
async function type(t){
  const d=document.createElement("div");
  d.className="line";
  term.appendChild(d);
  for(let i=0;i<t.length;i++){
    d.textContent+=t[i];
    if(Math.random()>.7) beep(1400,40);
    await new Promise(r=>setTimeout(r,10));
  }
}
// ===== MOBILE PERFORMANCE GUARD (NO LOGIC CHANGE) =====
const isSmallScreen = Math.min(window.innerWidth, window.innerHeight) < 480;

// Î±Î½ Î· ÏƒÏ…ÏƒÎºÎµÏ…Î® ÎµÎ¯Î½Î±Î¹ Î¼Î¹ÎºÏÎ®, Ï‡Î±Î»Î±ÏÏÎ½Î¿Ï…Î¼Îµ Î•Î›Î‘Î¦Î¡Î‘ Ï„Î¿ redraw
if (isSmallScreen) {
  // Î¼ÎµÎ¹ÏÎ½ÎµÎ¹ Î¼ÏŒÎ½Î¿ Ï„Î¿ matrix redraw, ÏŒÏ‡Î¹ Ï„Î¿ prank
  clearInterval?.(window.__matrixInterval);
}

// RUN
async function run(){
  const f1=flash1, f2=flash2, share=document.getElementById("share");

  // Î”Î™Î Î›ÎŸ RED FLASH + 4 BEEPS + Î”ÎŸÎÎ—Î£Î—
  flash(f1); beepBurst();
  setTimeout(()=>flash(f2),120);

  // FAKE SCREEN SHARE
  setTimeout(()=>share.classList.add("show"),350);
  setTimeout(()=>share.classList.remove("show"),1200);

  if(navigator.vibrate) navigator.vibrate([120,60,120]);

  for(const l of lines){
    await type(l);
    await new Promise(r=>setTimeout(r,90));
  }

  // ALERT
  startAlarm();
  if(navigator.vibrate) navigator.vibrate([200,100,200,100,200]);

  setTimeout(stopAlarm,2600);

  const end=document.createElement("div");
  end.className="line glitch red";
  end.textContent=`
âš  SYSTEM ALERT âš 

Î‘Î³Î±Ï€Î·Ï„Î­ ÏƒÏ…Î³Ï‡Ï‰ÏÎ¹Î±Î½Î­ Nick Aftias
Î¤Î·Î½ Ï€Î¬Ï„Î·ÏƒÎµÏ‚ ğŸ¤£ğŸ¤£ğŸ¤£

ÎœÎµ Ï„Î¿ Ï€Î¿Ï… Î¼Ï€Î®ÎºÎµÏ‚ ÎµÎ´Ï :
âœ” ÎœÎµ Ï„Î¿ Î±ÏÏ‡Î¹ÎºÏŒ Flash Ï€Î®ÏÎ±Î¼Îµ Ï„Î· 
Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ÏƒÎ¿Ï…
âœ” ÎˆÏ‡Î¿Ï…Î¼Îµ Ï€Î»Î­Î¿Î½ ÎºÎ±Ï„Î±Î³ÏÎ¬ÏˆÎµÎ¹ Ï„Î·Î½ IP 
ÏƒÎ¿Ï… ÎºÎ±Î¹ Ï„Î¿ Î²ÏÏŒÎ³Ï‡Î¿ Ï€Î¿Ï… ÏƒÏ…Î½Î´Î­Î¸Î·ÎºÎµÏ‚
âœ” ÎˆÏ‡Î¿Ï…Î¼Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î·Î½ ÏƒÏ…ÏƒÎºÎµÏ…Î® ÎºÎ±Î¹ 
Ï„Î·Î½ Î¿Î¸ÏŒÎ½Î· ÏƒÎ¿Ï…

Î£Îµ  ÎµÏ…Ï‡Î±ÏÎ¹ÏƒÏ„Î¿ÏÎ¼Îµ Ï€Î¿Î»Ï
Î¡Î±Î½Ï„ÎµÎ²Î¿Ï ÏƒÏ„Î·Î½ Î•Ï…ÎµÎ»Ï€Î¯Î´Ï‰Î½ ğŸ¤£
`;
  term.appendChild(end);
}

run();
</script>

</body>
</html>
